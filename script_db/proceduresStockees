DROP PROCEDURE IF EXISTS update_score_msg
CREATE PROCEDURE update_score_msg(INTEGER message_id, BOOLEAN up_vote)
LANGUAGE 'SQL'
AS $$
BEGIN ATOMIC
	DECLARE var = 1;
	IF up_vote IS TRUE THEN
		var = 1;
	ELSE
		var = -1;
    -- updating score in message
    UPDATE message
    SET score = score + var;
	WHERE message.message_id = message_id;
END update_score_msg;
$$;